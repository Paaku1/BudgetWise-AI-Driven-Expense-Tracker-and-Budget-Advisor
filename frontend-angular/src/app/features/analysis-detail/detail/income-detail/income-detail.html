<div class="tab-content">
  @if(incomeSummary) {
    <div class="overall-summary-container full-width">
      <div class="summary-card"><h4>Total Income This Month</h4><p>{{ incomeSummary.totalIncomeThisMonth | currency:'INR' }}</p></div>
      <div class="summary-card"><h4>Highest Income Source</h4><p>{{ incomeSummary.highestIncomeCategory }}</p></div>
    </div>
  }
  <div class="content-grid">
    <div class="main-content">
      <div class="sidebar-content">
        <h2>Category Details</h2>
        @if(selectedIncomeCategorySummary) {
          <div class="summary-card">
            <h4>Total Income ({{ selectedIncomeCategorySummary.highestIncomeCategory }})</h4>
            <p>{{ selectedIncomeCategorySummary.totalIncomeThisMonth | currency:'INR' }}</p>
          </div>
        } @else {
          <p class="details-prompt">Click a category on a chart for details.</p>
        }
      </div>

      <div class="chart-box">
        <div class="chart-switcher">
          <button (click)="selectChartType('pie')" [class.active]="selectedChartType === 'pie'">Pie Chart</button>
          <button (click)="selectChartType('bar')" [class.active]="selectedChartType === 'bar'">Bar Chart</button>
        </div>
        @if(selectedChartType === 'pie') {
          <app-pie-chart [data]="incomeByCategory" (categoryClicked)="onCategorySelected($event)"></app-pie-chart>
        }
        @if(selectedChartType === 'bar') {
          <app-bar-chart [data]="incomeByCategory" [label]="'Income'" (categoryClicked)="onCategorySelected($event)"></app-bar-chart>
        }
      </div>
    </div>
  </div>
</div>
