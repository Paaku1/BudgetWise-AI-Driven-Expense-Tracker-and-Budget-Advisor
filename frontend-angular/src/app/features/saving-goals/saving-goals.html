<div class="saving-goals-container">
  <div class="section-header">
    <h3>Savings Goals</h3>
    <button (click)="onAddGoal()">Add New</button>
  </div>
  @if (isGoalFormVisible) {
    <div class="modal">
      <div class="modal-content">
        <span class="close" (click)="isGoalFormVisible = false">&times;</span>
        <app-saving-goal-form (goalAdded)="onGoalAdded($event)" (closeForm)="isGoalFormVisible = false"></app-saving-goal-form>
      </div>
    </div>
  }
  @if (savingGoals.length === 0) {
    <p class="empty-state">No savings goals found. Start saving today!</p>
  } @else {
    @for (goal of savingGoals; track goal.id) {
      <div class="goal-card">
        <div class="goal-header">
          <h4>{{ goal.category }}</h4>
          <span class="goal-amount">{{ goal.savedAmount | currency:'INR' }} / {{ goal.targetAmount | currency:'INR' }}</span>
        </div>
        <div class="progress-bar">
          <div class="progress-fill" [style.width.%]="(goal.savedAmount / goal.targetAmount) * 100"></div>
        </div>
        <div class="goal-footer">
          <span>Deadline: {{ goal.deadline | date }}</span>
          <span>{{ (goal.savedAmount / goal.targetAmount) | percent }}</span>
        </div>
      </div>
    }
  }
</div>
